# cat tests/lookup-dupe-empty.yml  | python run_cmd.py --port 27020 --db db
# mongocryptd does not error if "coll1" has an empty entry in both `csfleEncryptionSchemas` and `encryptionInformation`.
{
    "aggregate": "coll1",
    "pipeline": [
        {
            "$lookup": {
                "from": "coll2",
                "as": "matched",
                "pipeline" : [{"$match" : {"encryptedIndexed" : "foo"}} ]
            }
        }
    ],
    "cursor": {},
    "encryptionInformation": {
        "type": {
            "$numberInt": "1"
        },
        "schema": {
            "db.coll1": {
                "escCollection": "enxcol_.coll2.esc",
                "ecocCollection": "enxcol_.coll2.ecoc",
                "fields": []
            },
            "db.coll2": {
                "escCollection": "enxcol_.coll2.esc",
                "ecocCollection": "enxcol_.coll2.ecoc",
                "fields": [
                    {
                        "keyId": {
                            "$binary": {
                                "base64": "YWFhYWFhYWFhYWFhYWFhYQ==",
                                "subType": "04"
                            }
                        },
                        "path": "encryptedIndexed",
                        "bsonType": "string",
                        "queries": {
                            "queryType": "equality",
                            "contention": {
                                "$numberInt": "8"
                            }
                        }
                    }
                ]
            }
        }
    },
    "csfleEncryptionSchemas": {
        "db.coll1": {
            "jsonSchema": {},
            "isRemoteSchema": true
        }
    }
}
